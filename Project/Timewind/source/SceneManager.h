/*************************************************************************************************/
/*!
\file SceneManager.h
\author Aiden Cvengros
\par email: ajcvengros\@gmail.com
\date 2024.5.22
\brief
    Manages loading, unloading, and running scenes

    Functions include:
        + [FILL]

Copyright (c) 2023 Aiden Cvengros
*/
/*************************************************************************************************/

#ifndef Syncopatience_SceneManager_H_
#define Syncopatience_SceneManager_H_

#pragma once

//-------------------------------------------------------------------------------------------------
// Include Header Files
//-------------------------------------------------------------------------------------------------

#include "stdafx.h"

// Gets the base system class
#include "System.h"

// The scene class
#include "Scene.h"

// The map matrix class
#include "MapMatrix.h"

// Uses vectors to hold the list of available scenes
#include <vector>

//-------------------------------------------------------------------------------------------------
// Forward References
//-------------------------------------------------------------------------------------------------

// Forward references the engine class to prevent header loops
class Engine;

//-------------------------------------------------------------------------------------------------
// Public Constants
//-------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
// Public Classes
//-------------------------------------------------------------------------------------------------

/*************************************************************************************************/
/*!
	\brief
		Manages scenes in the game
*/
/*************************************************************************************************/
class SceneManager : public System
{
public:
	//---------------------------------------------------------------------------------------------
	// Public Consts
	//---------------------------------------------------------------------------------------------
	
	//---------------------------------------------------------------------------------------------
	// Public Structures
	//---------------------------------------------------------------------------------------------
	
	//---------------------------------------------------------------------------------------------
	// Public Variables
	//---------------------------------------------------------------------------------------------
	
	//---------------------------------------------------------------------------------------------
	// Public Function Declarations
	//---------------------------------------------------------------------------------------------

	/*************************************************************************************************/
	/*!
		\brief
			Constructor for the texture manager class

		\param engine
			The engine of the scene manager
	*/
	/*************************************************************************************************/
	SceneManager(Engine* engine);

	/*************************************************************************************************/
	/*!
		\brief
			Destructor for the scene manager class
	*/
	/*************************************************************************************************/
	~SceneManager() {}

	/*************************************************************************************************/
	/*!
		\brief
			Initializes the scene manager (defaults to: sandbox)
	*/
	/*************************************************************************************************/
	void Init();

	/*************************************************************************************************/
	/*!
		\brief
			Updates the current scene

		\param
			The time elapsed since the previous frame.
	*/
	/*************************************************************************************************/
	void Update(double dt);

	/*************************************************************************************************/
	/*!
		\brief
			Draws the current scene (currently empty)
			
		\param window
			The window being drawn to
	*/
	/*************************************************************************************************/
	void Draw(Window* window);

	/*************************************************************************************************/
	/*!
		\brief
			Shuts down the scene manager and the current scene
	*/
	/*************************************************************************************************/
	void Shutdown();

	/*************************************************************************************************/
	/*!
		\brief
			Sets the map for the scene

		\param mapMatrix_
			The map matrix for the scene
	*/
	/*************************************************************************************************/
	void SetMapMatrix(MapMatrix* mapMatrix_) { mapMatrix = mapMatrix_; }

	/*************************************************************************************************/
	/*!
		\brief
			Sets the effect manager for the scene

		\param effectManager_
			The effect manager for the scene
	*/
	/*************************************************************************************************/
	void SetEffectManager(EffectManager* effectManager_) { effectManager = effectManager_; }

	/*************************************************************************************************/
	/*!
		\brief
			Gets the current scene being run

		\return
			The current scene
	*/
	/*************************************************************************************************/
	Scene* GetCurrentScene() { return sceneList[currentSceneIndex]; }

	/*************************************************************************************************/
	/*!
		\brief
			Gets the current scene' map matrix

		\return
			The map matrix
	*/
	/*************************************************************************************************/
	MapMatrix* GetMapMatrix() { return mapMatrix; }
	
private:
	//---------------------------------------------------------------------------------------------
	// Private Consts
	//---------------------------------------------------------------------------------------------
	
	//---------------------------------------------------------------------------------------------
	// Private Structures
	//---------------------------------------------------------------------------------------------
	
	//---------------------------------------------------------------------------------------------
	// Private Variables
	//---------------------------------------------------------------------------------------------

	std::vector<Scene*> sceneList;				// The list of scenes
	int currentSceneIndex;						// The index of the current scene
	int nextSceneIndex;							// The index of the next scene
	bool changeScene;							// Boolean telling whether the scene should change

	MapMatrix* mapMatrix;						// The map matrix for scenes to change the map
	EffectManager* effectManager;				// The effect manager for scenes to make effects
	
	//---------------------------------------------------------------------------------------------
	// Private Function Declarations
	//---------------------------------------------------------------------------------------------
};

//-------------------------------------------------------------------------------------------------
// Public Variables
//-------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
// Public Functions
//-------------------------------------------------------------------------------------------------

#endif // Syncopatience_SceneManager_H_
